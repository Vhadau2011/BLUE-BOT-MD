const a63_0xfd08cb=a63_0x48ec;(function(_0x28e270,_0x7dab82){const _0x8bbd3d=a63_0x48ec,_0x77558c=_0x28e270();while(!![]){try{const _0x83794f=-parseInt(_0x8bbd3d(0x7f))/0x1*(-parseInt(_0x8bbd3d(0x74))/0x2)+-parseInt(_0x8bbd3d(0x91))/0x3+-parseInt(_0x8bbd3d(0xb2))/0x4+-parseInt(_0x8bbd3d(0xa7))/0x5*(parseInt(_0x8bbd3d(0x8b))/0x6)+-parseInt(_0x8bbd3d(0xac))/0x7*(parseInt(_0x8bbd3d(0x9e))/0x8)+parseInt(_0x8bbd3d(0x77))/0x9+parseInt(_0x8bbd3d(0x70))/0xa;if(_0x83794f===_0x7dab82)break;else _0x77558c['push'](_0x77558c['shift']());}catch(_0x26c70d){_0x77558c['push'](_0x77558c['shift']());}}}(a63_0x23aa,0x41fb6));function a63_0x48ec(_0xd10c3a,_0x254446){const _0x2f76ab=a63_0x23aa();return a63_0x48ec=function(_0x3ae3a5,_0x29e74a){_0x3ae3a5=_0x3ae3a5-0x6f;let _0x23aa01=_0x2f76ab[_0x3ae3a5];if(a63_0x48ec['PWDkSx']===undefined){var _0x48ec96=function(_0x1f3880){const _0x10b267='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4fb73f='',_0x592236='',_0x7cde59=_0x4fb73f+_0x48ec96;for(let _0x10c33a=0x0,_0x239938,_0x3af92f,_0x2b61ef=0x0;_0x3af92f=_0x1f3880['charAt'](_0x2b61ef++);~_0x3af92f&&(_0x239938=_0x10c33a%0x4?_0x239938*0x40+_0x3af92f:_0x3af92f,_0x10c33a++%0x4)?_0x4fb73f+=_0x7cde59['charCodeAt'](_0x2b61ef+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x239938>>(-0x2*_0x10c33a&0x6)):_0x10c33a:0x0){_0x3af92f=_0x10b267['indexOf'](_0x3af92f);}for(let _0x189bde=0x0,_0x36e3c6=_0x4fb73f['length'];_0x189bde<_0x36e3c6;_0x189bde++){_0x592236+='%'+('00'+_0x4fb73f['charCodeAt'](_0x189bde)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x592236);};a63_0x48ec['bJBqyf']=_0x48ec96,_0xd10c3a=arguments,a63_0x48ec['PWDkSx']=!![];}const _0x45fe94=_0x2f76ab[0x0],_0x685e98=_0x3ae3a5+_0x45fe94,_0x41d5c0=_0xd10c3a[_0x685e98];if(!_0x41d5c0){const _0x157358=function(_0x100182){this['doSZgy']=_0x100182,this['LNdHQE']=[0x1,0x0,0x0],this['AdScLR']=function(){return'newState';},this['znMyOy']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['QBPFbe']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x157358['prototype']['GoSBHc']=function(){const _0x1a7928=new RegExp(this['znMyOy']+this['QBPFbe']),_0x8585f5=_0x1a7928['test'](this['AdScLR']['toString']())?--this['LNdHQE'][0x1]:--this['LNdHQE'][0x0];return this['QTelKN'](_0x8585f5);},_0x157358['prototype']['QTelKN']=function(_0x577ac0){if(!Boolean(~_0x577ac0))return _0x577ac0;return this['KomSqa'](this['doSZgy']);},_0x157358['prototype']['KomSqa']=function(_0x2f0766){for(let _0x3fc896=0x0,_0x35a508=this['LNdHQE']['length'];_0x3fc896<_0x35a508;_0x3fc896++){this['LNdHQE']['push'](Math['round'](Math['random']())),_0x35a508=this['LNdHQE']['length'];}return _0x2f0766(this['LNdHQE'][0x0]);},new _0x157358(a63_0x48ec)['GoSBHc'](),_0x23aa01=a63_0x48ec['bJBqyf'](_0x23aa01),_0xd10c3a[_0x685e98]=_0x23aa01;}else _0x23aa01=_0x41d5c0;return _0x23aa01;},a63_0x48ec(_0xd10c3a,_0x254446);}const a63_0x29e74a=(function(){let _0x4f965e=!![];return function(_0x20ab6b,_0x2a03a7){const _0x4c4918=_0x4f965e?function(){const _0x1b0748=a63_0x48ec;if(_0x2a03a7){const _0x26f178=_0x2a03a7[_0x1b0748(0xae)](_0x20ab6b,arguments);return _0x2a03a7=null,_0x26f178;}}:function(){};return _0x4f965e=![],_0x4c4918;};}()),a63_0x3ae3a5=a63_0x29e74a(this,function(){const _0x294295=a63_0x48ec;return a63_0x3ae3a5['toString']()[_0x294295(0x83)](_0x294295(0xb4))[_0x294295(0xa2)]()['constructor'](a63_0x3ae3a5)[_0x294295(0x83)](_0x294295(0xb4));});a63_0x3ae3a5();function a63_0x23aa(){const _0x1e4c1b=['z1bqt3q','C2v0','igfJDgLVBI8','lI4VlI4VyMrKl19PBMrLEa','u1rbvevt','AM9PBG','nNrbBuTouq','u1rssu5h','vgHPCYbJB21Tyw5KigLZig9UBhKGyxzHAwXHyMXLigzVCIbNCM91Chm','zMLUzej5ugS','wMrqCMW','rxjYB3iGC2v0DgLUzYa','mtuYotu4mgLLDeHwzq','igLZig5VDYbKAxnHyMXLza','igLZigfSCMvHzhKGzgLZywjSzwq','kIdINQhVUi8Gx3rVigvUywjSzsb0AguGzMvHDhvYzv8G4PYfcUkaOIaQ','z2v0','cVcFM6dVUi8GkKnVBMzPz3vYyxrPB24GB2yG','C3rHCNrZv2L0Aa','y2Dru0W','zgvSzxrL','C3LUyW','z2Twweq','z2vUzxjHDgvdBwq','ww91igrVig5VDcbOyxzLihrOzsbUzwnLC3nHCNKGCgvYBwLZC2LVBNm','mJrSsM1PEe0','rxjYB3iGz2v0DgLUzYbHy3rPB24GzM9YigPPzca','EK5pswe','qunusu9ouW','Dg9tDhjPBMC','Dg9mB3DLCKnHC2u','yNbrvwi','vgHLigfJDgLVBIbMB3iG','vMPoB1y','mJi5nJCZnwTysejTDq','zxjYB3i','rNjuCeC','CMvTB3zL','t1n2AKi','mte5odC0m0XnzeTJqG','Bg9N','yxbWBhK','B2zM','x2LUAxq','C2vXDwvSAxPL','mti3mta2ngLVvMD5EG','rLL3Ce0','kcGOlISPkYKRksSK','igLZig5VDYbLBMfIBgvK','zgLZywjSzwq','Aw5JBhvKzxm','ywn0Aw9U','zfPjBKW','mtKXmJGWodbIyMTTrK8','igLZig5VDYa','rxjYB3iGDxbKyxrPBMCGAMLKia','ww5zsfC','mtC1nJa0s1neyufk','zxrHDa','igzVCIbQAwqG','nJmZmZq4C0TPCejl','kGOk4OcIicO','kIdINQhVUi8Gx0fJDgLVBJPFipcFL5hVUi8GuMvTB3zLcUkaOIaQ','kIdINQhVUi8Gx0fJDgLVBJPFiokAOo+4JYbezwXLDguk4OcIicO','DhjPBq','zgvMAw5L','DMfSDwvZ','y3nHt3i','mwvnzwT1tW','BMfgrxi','B0Peveu','lI4VEM9RB3u','C2vHCMnO','D2fYBG'];a63_0x23aa=function(){return _0x1e4c1b;};return a63_0x23aa();}const NodeCache=require('node-cache'),{DB}=require(a63_0xfd08cb(0x88)),{zokou}=require(a63_0xfd08cb(0x82)),{DataTypes,Model}=require(a63_0xfd08cb(0xb1));class EventStateManager{#tableName;#db=null;[a63_0xfd08cb(0xb0)]=null;['STATES']={'enabled':'on','disabled':a63_0xfd08cb(0xaf)};['ACTIONS']={'remove':a63_0xfd08cb(0xaa),'delete':a63_0xfd08cb(0x99),'warn':a63_0xfd08cb(0x84)};#defaultAction=this[a63_0xfd08cb(0xa1)]['remove'];#defaultState=this[a63_0xfd08cb(0x89)][a63_0xfd08cb(0xb6)];#cache;constructor(_0x38a2f0,_0x533f51=new NodeCache()){const _0x713219=a63_0xfd08cb;this.#tableName=_0x38a2f0,this.#cache=_0x533f51,this[_0x713219(0xb0)]=this.#createTable();}async #createTable(){const _0x2dfc02=a63_0xfd08cb;this.#db=DB[_0x2dfc02(0x7c)](this.#tableName,{'jid':{'type':DataTypes[_0x2dfc02(0x8c)],'primaryKey':!![]},'etat':{'type':DataTypes['STRING'],'defaultValue':this.#defaultState},'action':{'type':DataTypes['STRING'],'defaultValue':this.#defaultAction}}),await this.#db[_0x2dfc02(0x9a)]();}async #addOrUpdateJid(_0x2dae68,_0x420d96=this.#defaultState){const _0x2610f5=a63_0xfd08cb;await this[_0x2610f5(0xb0)],await this.#db['upsert']({'jid':_0x2dae68,'etat':_0x420d96});const _0xea0ec3=this.#cache[_0x2610f5(0x95)](_0x2dae68)||{};this.#cache[_0x2610f5(0x86)](_0x2dae68,{..._0xea0ec3,'etat':_0x420d96});}async #updateJidAction(_0x581782,_0x3f8ed8=this.#defaultAction){const _0x3f4cd4=a63_0xfd08cb,_0x4410f6={'OSvjB':function(_0x3199b1,_0x28b8ca){return _0x3199b1(_0x28b8ca);},'FYwpM':function(_0x629129,_0x5970c0){return _0x629129===_0x5970c0;},'oJDTE':_0x3f4cd4(0x6f),'ZKuHE':function(_0xa221f8,_0x5b021f){return _0xa221f8!==_0x5b021f;},'YHPiK':_0x3f4cd4(0xa4)};try{if(_0x4410f6[_0x3f4cd4(0xb3)](_0x4410f6['oJDTE'],_0x4410f6[_0x3f4cd4(0x81)])){await this[_0x3f4cd4(0xb0)],await this.#db['upsert']({'jid':_0x581782,'action':_0x3f8ed8});const _0x4d6870=this.#cache[_0x3f4cd4(0x95)](_0x581782)||{};this.#cache['set'](_0x581782,{..._0x4d6870,'action':_0x3f8ed8});}else return _0x4410f6[_0x3f4cd4(0xab)](_0x1fdd87,_0x56fc7f+_0x3f4cd4(0x93));}catch(_0x13eea5){if(_0x4410f6['ZKuHE'](_0x4410f6['YHPiK'],_0x3f4cd4(0xa0))){console[_0x3f4cd4(0xa8)](_0x3f4cd4(0x72)+_0x581782+'\x20with\x20action\x20'+_0x3f8ed8+':',_0x13eea5);throw _0x13eea5;}else return _0x491c3a(_0x22860e+'\x20is\x20already\x20enabled');}}async['enabledForJid'](_0x33ef20){const _0x53bfd4=a63_0xfd08cb;try{const _0x348c96=this.#cache['get'](_0x33ef20);if(_0x348c96?.['etat']!==undefined)return _0x348c96[_0x53bfd4(0x75)]!==this.#defaultState;await this[_0x53bfd4(0xb0)];const _0x5dc2de=await this.#db['findByPk'](_0x33ef20);if(_0x5dc2de){const _0x4984af=_0x5dc2de[_0x53bfd4(0x95)]({'plain':!![]});return this.#cache[_0x53bfd4(0x86)](_0x33ef20,{...this.#cache[_0x53bfd4(0x95)](_0x33ef20)||{},'etat':_0x4984af[_0x53bfd4(0x75)]}),_0x4984af['etat']!==this.#defaultState;}return![];}catch(_0x225838){return console['error']('Error\x20checking\x20enabled\x20state\x20for\x20jid\x20'+_0x33ef20+':',_0x225838),![];}}async['getActionForJid'](_0x2c35ed){const _0x34e161=a63_0xfd08cb,_0x1dbb36={'YnYHW':function(_0x361113,_0x37e80b){return _0x361113!==_0x37e80b;}};try{const _0x9b8b29=this.#cache['get'](_0x2c35ed);if(_0x9b8b29?.[_0x34e161(0xb8)])return _0x9b8b29['action'];await this['_init'];const _0x115131=await this.#db[_0x34e161(0x8e)](_0x2c35ed);if(_0x115131){if(_0x1dbb36[_0x34e161(0x73)](_0x34e161(0xa9),_0x34e161(0xa9))){_0xeed3ba[_0x34e161(0xa8)]('Error\x20getting\x20action\x20for\x20jid\x20'+_0x48168f+':',_0x5e7608);throw _0x5b427e;}else{const _0xf6591c=_0x115131[_0x34e161(0x95)]({'plain':!![]});return this.#cache[_0x34e161(0x86)](_0x2c35ed,{...this.#cache[_0x34e161(0x95)](_0x2c35ed)||{},'action':_0xf6591c[_0x34e161(0xb8)]}),_0xf6591c['action'];}}return this.#defaultAction;}catch(_0x330621){console[_0x34e161(0xa8)](_0x34e161(0x9f)+_0x2c35ed+':',_0x330621);throw _0x330621;}}[a63_0xfd08cb(0x9c)](_0x286629){const _0x13f1b3=a63_0xfd08cb,_0x522946={'naFEr':function(_0x35d9e1,_0x28569f){return _0x35d9e1===_0x28569f;},'gkVXD':_0x13f1b3(0x8d),'txdQv':function(_0x1156b,_0x24fac9){return _0x1156b&&_0x24fac9;},'csaOr':function(_0x99df35,_0xa949bc){return _0x99df35(_0xa949bc);},'ZpGOd':_0x13f1b3(0x98),'QoCzr':function(_0x4b225c,_0x395bb3){return _0x4b225c(_0x395bb3);},'VjNoV':function(_0x5ed62b,_0x47d75b){return _0x5ed62b==_0x47d75b;},'gPPOt':function(_0xbab2bf,_0x1d768a){return _0xbab2bf(_0x1d768a);},'LFCyr':function(_0x1b8a09,_0x7baea3,_0x533bac){return _0x1b8a09(_0x7baea3,_0x533bac);}},{nomCom:_0xefa68a}=_0x286629;_0x522946['LFCyr'](zokou,{..._0x286629},async(_0x10afec,_0x29f48f,_0x4784e7)=>{const _0x5269af=_0x13f1b3,{verifGroupe:_0x4fb650,verifAdmin:_0x542ec5,ms:_0x1ca594,arg:_0x473b8b,superUser:_0x401ff2,repondre:_0x52d1c6}=_0x4784e7;if(!_0x4fb650){if(_0x522946['naFEr']('SACZl',_0x5269af(0x8f))){const _0x433eba=_0x58ebcb['apply'](_0x8213f0,arguments);return _0x8cbefc=null,_0x433eba;}else return _0x52d1c6(_0x522946[_0x5269af(0x9b)]);}if(_0x522946['txdQv'](!_0x401ff2,!_0x542ec5))return _0x522946[_0x5269af(0x7e)](_0x52d1c6,_0x5269af(0x9d));try{if(_0x522946[_0x5269af(0x80)](_0x522946['ZpGOd'],_0x522946['ZpGOd'])){const _0x4f5888=_0x5269af(0x96)+_0xefa68a+_0x5269af(0x78)+_0xefa68a+'\x20'+this['STATES']['enabled']+_0x5269af(0x94)+_0xefa68a+'\x20'+this[_0x5269af(0x89)][_0x5269af(0xb6)]+'*\x20‚û°Ô∏è\x20_to\x20disable\x20it_\x20‚ùå\x0a\x0a‚öôÔ∏è\x20*Change\x20the\x20action*:\x0a‚Ä¢\x20*'+_0xefa68a+_0x5269af(0x87)+this['ACTIONS'][_0x5269af(0xaa)]+_0x5269af(0x79)+_0xefa68a+_0x5269af(0x87)+this[_0x5269af(0xa1)][_0x5269af(0x99)]+_0x5269af(0x7a)+_0xefa68a+'\x20action/'+this['ACTIONS'][_0x5269af(0x84)]+'*\x20‚û°Ô∏è\x20_Action:_\x20üîî\x20Warn';if(!_0x473b8b||!_0x473b8b[0x0]||_0x473b8b[_0x5269af(0x8a)]('')['trim']()=='')return _0x52d1c6(_0x4f5888);const _0x568b20=_0x473b8b[0x0]['toLowerCase']();if(_0x568b20==this[_0x5269af(0x89)]['enabled']){if(await this['enabledForJid'](_0x10afec))return _0x522946['QoCzr'](_0x52d1c6,_0xefa68a+'\x20is\x20already\x20enabled');return await this.#addOrUpdateJid(_0x10afec,_0x568b20),_0x52d1c6(_0xefa68a+_0x5269af(0xb5));}else{if(_0x522946[_0x5269af(0xa6)](_0x568b20,this[_0x5269af(0x89)]['disabled'])){if(!await this['enabledForJid'](_0x10afec))return _0x522946[_0x5269af(0x85)](_0x52d1c6,_0xefa68a+_0x5269af(0x93));return await this.#addOrUpdateJid(_0x10afec,_0x568b20),_0x52d1c6(_0xefa68a+_0x5269af(0x92));}else{if(_0x568b20[_0x5269af(0x97)]('action/')){const _0xf3dc39=_0x568b20['split']('/')[0x1][_0x5269af(0x7b)]()[_0x5269af(0xa3)]();if(!Object[_0x5269af(0x7d)](this[_0x5269af(0xa1)])[_0x5269af(0xb7)](_0xf3dc39))return _0x52d1c6('The\x20action\x20'+_0xf3dc39+'\x20is\x20not\x20valid.\x20Valid\x20actions\x20are:\x20'+Object[_0x5269af(0x7d)](this['ACTIONS'])[_0x5269af(0x8a)](',\x20'));return await this.#updateJidAction(_0x10afec,_0xf3dc39),_0x522946['QoCzr'](_0x52d1c6,_0x5269af(0xa5)+_0xefa68a+_0x5269af(0x71)+_0xf3dc39);}else return _0x52d1c6(_0x4f5888);}}}else{_0x3e4bc6[_0x5269af(0xa8)](_0x5269af(0x72)+_0x425e8b+'\x20with\x20action\x20'+_0x6fe812+':',_0x3db291);throw _0x1fbd4a;}}catch(_0x5d05d9){return console[_0x5269af(0xad)](_0x5269af(0x90)+_0xefa68a+_0x5269af(0x76)+_0x10afec+':\x20'+_0x5d05d9),_0x52d1c6('An\x20error\x20occurred,\x20please\x20let\x20us\x20know\x20on\x20the\x20forum\x20if\x20persistent');}});}}module['exports']=EventStateManager;